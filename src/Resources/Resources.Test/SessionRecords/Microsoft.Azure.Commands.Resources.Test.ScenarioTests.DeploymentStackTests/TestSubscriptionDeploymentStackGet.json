{
  "Entries": [
    {
      "RequestUri": "/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps4097?api-version=2021-05-01-preview",
      "EncodedRequestUri": "L3N1YnNjcmlwdGlvbnMvYTFiZmE2MzUtZjJiZi00MmYxLTg2YjUtODQ4YzY3NGZjMzIxL3Byb3ZpZGVycy9NaWNyb3NvZnQuUmVzb3VyY2VzL2RlcGxveW1lbnRTdGFja3MvcHM0MDk3P2FwaS12ZXJzaW9uPTIwMjEtMDUtMDEtcHJldmlldw==",
      "RequestMethod": "GET",
      "RequestBody": "",
      "RequestHeaders": {
        "x-ms-client-request-id": [
          "b8210b00-4e8c-4de8-96f0-d1eb8ac6e9c8"
        ],
        "Accept-Language": [
          "en-US"
        ],
        "User-Agent": [
          "FxVersion/4.6.30015.01",
          "OSName/Windows",
          "OSVersion/Microsoft.Windows.10.0.19043.",
          "Microsoft.Azure.Management.ResourceManager.DeploymentStacksClient/3.13.2.0"
        ]
      },
      "ResponseHeaders": {
        "Cache-Control": [
          "no-cache"
        ],
        "Pragma": [
          "no-cache"
        ],
        "x-ms-failure-cause": [
          "gateway"
        ],
        "x-ms-request-id": [
          "3e0a26ac-f88e-4554-af2f-5a17e1c4f07a"
        ],
        "x-ms-correlation-request-id": [
          "3e0a26ac-f88e-4554-af2f-5a17e1c4f07a"
        ],
        "x-ms-routing-request-id": [
          "CANADACENTRAL:20210806T183834Z:3e0a26ac-f88e-4554-af2f-5a17e1c4f07a"
        ],
        "Strict-Transport-Security": [
          "max-age=31536000; includeSubDomains"
        ],
        "X-Content-Type-Options": [
          "nosniff"
        ],
        "Date": [
          "Fri, 06 Aug 2021 18:38:34 GMT"
        ],
        "Content-Type": [
          "application/json; charset=utf-8"
        ],
        "Expires": [
          "-1"
        ],
        "Content-Length": [
          "154"
        ],
        "Retry-After": [
          "0"
        ]
      },
      "ResponseBody": "{\r\n  \"error\": {\r\n    \"code\": \"ResourceNotFound\",\r\n    \"message\": \"The resource 'ps4097' was not found. For more details please go to https://aka.ms/ARMResourceNotFoundFix\"\r\n  }\r\n}",
      "StatusCode": 404
    },
    {
      "RequestUri": "/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps4097?api-version=2021-05-01-preview",
      "EncodedRequestUri": "L3N1YnNjcmlwdGlvbnMvYTFiZmE2MzUtZjJiZi00MmYxLTg2YjUtODQ4YzY3NGZjMzIxL3Byb3ZpZGVycy9NaWNyb3NvZnQuUmVzb3VyY2VzL2RlcGxveW1lbnRTdGFja3MvcHM0MDk3P2FwaS12ZXJzaW9uPTIwMjEtMDUtMDEtcHJldmlldw==",
      "RequestMethod": "GET",
      "RequestBody": "",
      "RequestHeaders": {
        "x-ms-client-request-id": [
          "39218ca3-efb7-4031-a6ad-3a34ca0c8dbd"
        ],
        "Accept-Language": [
          "en-US"
        ],
        "User-Agent": [
          "FxVersion/4.6.30015.01",
          "OSName/Windows",
          "OSVersion/Microsoft.Windows.10.0.19043.",
          "Microsoft.Azure.Management.ResourceManager.DeploymentStacksClient/3.13.2.0"
        ]
      },
      "ResponseHeaders": {
        "Cache-Control": [
          "no-cache"
        ],
        "Pragma": [
          "no-cache"
        ],
        "x-ms-request-id": [
          "76243edb-699b-4647-9150-623a1f807f79"
        ],
        "Server": [
          "Microsoft-HTTPAPI/2.0"
        ],
        "x-ms-ratelimit-remaining-subscription-reads": [
          "11997"
        ],
        "x-ms-correlation-request-id": [
          "90c88484-4d14-4b86-b228-236ba087c128"
        ],
        "x-ms-routing-request-id": [
          "CANADACENTRAL:20210806T183835Z:90c88484-4d14-4b86-b228-236ba087c128"
        ],
        "Strict-Transport-Security": [
          "max-age=31536000; includeSubDomains"
        ],
        "X-Content-Type-Options": [
          "nosniff"
        ],
        "Date": [
          "Fri, 06 Aug 2021 18:38:35 GMT"
        ],
        "Content-Length": [
          "3598"
        ],
        "Content-Type": [
          "application/json; charset=utf-8"
        ],
        "Expires": [
          "-1"
        ],
        "Retry-After": [
          "0"
        ]
      },
      "ResponseBody": "{\r\n  \"location\": \"westus2\",\r\n  \"properties\": {\r\n    \"updateBehavior\": \"detach\",\r\n    \"parameters\": {\r\n      \"storageAccountName\": {\r\n        \"value\": \"armbuilddemo18123\"\r\n      }\r\n    },\r\n    \"template\": {\r\n      \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n      \"contentVersion\": \"1.0.0.0\",\r\n      \"parameters\": {\r\n        \"storageAccountName\": {\r\n          \"type\": \"string\",\r\n          \"defaultValue\": \"armbuilddemo18122\"\r\n        },\r\n        \"nestedDeploymentRG\": {\r\n          \"type\": \"string\",\r\n          \"defaultValue\": \"ps_test_subscription_deployment\"\r\n        },\r\n        \"policyLocation\": {\r\n          \"type\": \"string\",\r\n          \"defaultValue\": \"northeurope\"\r\n        }\r\n      },\r\n      \"variables\": {},\r\n      \"resources\": [\r\n        {\r\n          \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n          \"name\": \"policy2\",\r\n          \"apiVersion\": \"2016-12-01\",\r\n          \"properties\": {\r\n            \"policyType\": \"Custom\",\r\n            \"parameters\": {},\r\n            \"policyRule\": {\r\n              \"if\": {\r\n                \"field\": \"location\",\r\n                \"equals\": \"[parameters('policyLocation')]\"\r\n              },\r\n              \"then\": {\r\n                \"effect\": \"deny\"\r\n              }\r\n            }\r\n          }\r\n        },\r\n        {\r\n          \"type\": \"Microsoft.Authorization/policyAssignments\",\r\n          \"name\": \"location-lock\",\r\n          \"apiVersion\": \"2016-12-01\",\r\n          \"dependsOn\": [\r\n            \"policy2\"\r\n          ],\r\n          \"properties\": {\r\n            \"scope\": \"[subscription().id]\",\r\n            \"policyDefinitionId\": \"[resourceId('Microsoft.Authorization/policyDefinitions', 'policy2')]\"\r\n          }\r\n        },\r\n        {\r\n          \"type\": \"Microsoft.Resources/resourceGroups\",\r\n          \"name\": \"[parameters('nestedDeploymentRG')]\",\r\n          \"location\": \"West US\",\r\n          \"apiVersion\": \"2019-05-01\",\r\n          \"properties\": {}\r\n        },\r\n        {\r\n          \"type\": \"Microsoft.Resources/deployments\",\r\n          \"name\": \"rg-nested\",\r\n          \"apiVersion\": \"2017-05-10\",\r\n          \"resourceGroup\": \"[parameters('nestedDeploymentRG')]\",\r\n          \"dependsOn\": [\r\n            \"[parameters('nestedDeploymentRG')]\"\r\n          ],\r\n          \"properties\": {\r\n            \"template\": {\r\n              \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n              \"contentVersion\": \"1.0.0.0\",\r\n              \"parameters\": {},\r\n              \"variables\": {},\r\n              \"resources\": [\r\n                {\r\n                  \"type\": \"Microsoft.Storage/storageAccounts\",\r\n                  \"name\": \"[parameters('storageAccountName')]\",\r\n                  \"apiVersion\": \"2015-06-15\",\r\n                  \"location\": \"East US\",\r\n                  \"properties\": {\r\n                    \"accountType\": \"Standard_LRS\"\r\n                  }\r\n                }\r\n              ]\r\n            },\r\n            \"mode\": \"Incremental\"\r\n          }\r\n        }\r\n      ]\r\n    },\r\n    \"provisioningState\": \"initializing\"\r\n  },\r\n  \"systemData\": {\r\n    \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n    \"createdByType\": \"Application\",\r\n    \"createdAt\": \"2021-08-06T18:38:34.7122081Z\",\r\n    \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n    \"lastModifiedByType\": \"Application\",\r\n    \"lastModifiedAt\": \"2021-08-06T18:38:34.7122081Z\"\r\n  },\r\n  \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps4097\",\r\n  \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n  \"name\": \"ps4097\"\r\n}",
      "StatusCode": 200
    },
    {
      "RequestUri": "/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps4097?api-version=2021-05-01-preview",
      "EncodedRequestUri": "L3N1YnNjcmlwdGlvbnMvYTFiZmE2MzUtZjJiZi00MmYxLTg2YjUtODQ4YzY3NGZjMzIxL3Byb3ZpZGVycy9NaWNyb3NvZnQuUmVzb3VyY2VzL2RlcGxveW1lbnRTdGFja3MvcHM0MDk3P2FwaS12ZXJzaW9uPTIwMjEtMDUtMDEtcHJldmlldw==",
      "RequestMethod": "GET",
      "RequestBody": "",
      "RequestHeaders": {
        "x-ms-client-request-id": [
          "2ad1f7f9-4549-4001-a805-a27fbcb6d620"
        ],
        "Accept-Language": [
          "en-US"
        ],
        "User-Agent": [
          "FxVersion/4.6.30015.01",
          "OSName/Windows",
          "OSVersion/Microsoft.Windows.10.0.19043.",
          "Microsoft.Azure.Management.ResourceManager.DeploymentStacksClient/3.13.2.0"
        ]
      },
      "ResponseHeaders": {
        "Cache-Control": [
          "no-cache"
        ],
        "Pragma": [
          "no-cache"
        ],
        "x-ms-request-id": [
          "e54aee10-7d9b-4368-ba2f-9d889ea1ed26"
        ],
        "Server": [
          "Microsoft-HTTPAPI/2.0"
        ],
        "x-ms-ratelimit-remaining-subscription-reads": [
          "11998"
        ],
        "x-ms-correlation-request-id": [
          "c34fb38f-89a6-409b-bac6-dc77f41b05fd"
        ],
        "x-ms-routing-request-id": [
          "CANADACENTRAL:20210806T183836Z:c34fb38f-89a6-409b-bac6-dc77f41b05fd"
        ],
        "Strict-Transport-Security": [
          "max-age=31536000; includeSubDomains"
        ],
        "X-Content-Type-Options": [
          "nosniff"
        ],
        "Date": [
          "Fri, 06 Aug 2021 18:38:36 GMT"
        ],
        "Content-Length": [
          "3746"
        ],
        "Content-Type": [
          "application/json; charset=utf-8"
        ],
        "Expires": [
          "-1"
        ],
        "Retry-After": [
          "0"
        ]
      },
      "ResponseBody": "{\r\n  \"location\": \"westus2\",\r\n  \"properties\": {\r\n    \"updateBehavior\": \"detach\",\r\n    \"deploymentId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deployments/ps4097-2021-08-06-18-38-35-2fd49\",\r\n    \"parameters\": {\r\n      \"storageAccountName\": {\r\n        \"value\": \"armbuilddemo18123\"\r\n      }\r\n    },\r\n    \"template\": {\r\n      \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n      \"contentVersion\": \"1.0.0.0\",\r\n      \"parameters\": {\r\n        \"storageAccountName\": {\r\n          \"type\": \"string\",\r\n          \"defaultValue\": \"armbuilddemo18122\"\r\n        },\r\n        \"nestedDeploymentRG\": {\r\n          \"type\": \"string\",\r\n          \"defaultValue\": \"ps_test_subscription_deployment\"\r\n        },\r\n        \"policyLocation\": {\r\n          \"type\": \"string\",\r\n          \"defaultValue\": \"northeurope\"\r\n        }\r\n      },\r\n      \"variables\": {},\r\n      \"resources\": [\r\n        {\r\n          \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n          \"name\": \"policy2\",\r\n          \"apiVersion\": \"2016-12-01\",\r\n          \"properties\": {\r\n            \"policyType\": \"Custom\",\r\n            \"parameters\": {},\r\n            \"policyRule\": {\r\n              \"if\": {\r\n                \"field\": \"location\",\r\n                \"equals\": \"[parameters('policyLocation')]\"\r\n              },\r\n              \"then\": {\r\n                \"effect\": \"deny\"\r\n              }\r\n            }\r\n          }\r\n        },\r\n        {\r\n          \"type\": \"Microsoft.Authorization/policyAssignments\",\r\n          \"name\": \"location-lock\",\r\n          \"apiVersion\": \"2016-12-01\",\r\n          \"dependsOn\": [\r\n            \"policy2\"\r\n          ],\r\n          \"properties\": {\r\n            \"scope\": \"[subscription().id]\",\r\n            \"policyDefinitionId\": \"[resourceId('Microsoft.Authorization/policyDefinitions', 'policy2')]\"\r\n          }\r\n        },\r\n        {\r\n          \"type\": \"Microsoft.Resources/resourceGroups\",\r\n          \"name\": \"[parameters('nestedDeploymentRG')]\",\r\n          \"location\": \"West US\",\r\n          \"apiVersion\": \"2019-05-01\",\r\n          \"properties\": {}\r\n        },\r\n        {\r\n          \"type\": \"Microsoft.Resources/deployments\",\r\n          \"name\": \"rg-nested\",\r\n          \"apiVersion\": \"2017-05-10\",\r\n          \"resourceGroup\": \"[parameters('nestedDeploymentRG')]\",\r\n          \"dependsOn\": [\r\n            \"[parameters('nestedDeploymentRG')]\"\r\n          ],\r\n          \"properties\": {\r\n            \"template\": {\r\n              \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n              \"contentVersion\": \"1.0.0.0\",\r\n              \"parameters\": {},\r\n              \"variables\": {},\r\n              \"resources\": [\r\n                {\r\n                  \"type\": \"Microsoft.Storage/storageAccounts\",\r\n                  \"name\": \"[parameters('storageAccountName')]\",\r\n                  \"apiVersion\": \"2015-06-15\",\r\n                  \"location\": \"East US\",\r\n                  \"properties\": {\r\n                    \"accountType\": \"Standard_LRS\"\r\n                  }\r\n                }\r\n              ]\r\n            },\r\n            \"mode\": \"Incremental\"\r\n          }\r\n        }\r\n      ]\r\n    },\r\n    \"provisioningState\": \"deploying\"\r\n  },\r\n  \"systemData\": {\r\n    \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n    \"createdByType\": \"Application\",\r\n    \"createdAt\": \"2021-08-06T18:38:34.7122081Z\",\r\n    \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n    \"lastModifiedByType\": \"Application\",\r\n    \"lastModifiedAt\": \"2021-08-06T18:38:34.7122081Z\"\r\n  },\r\n  \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps4097\",\r\n  \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n  \"name\": \"ps4097\"\r\n}",
      "StatusCode": 200
    },
    {
      "RequestUri": "/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps4097?api-version=2021-05-01-preview",
      "EncodedRequestUri": "L3N1YnNjcmlwdGlvbnMvYTFiZmE2MzUtZjJiZi00MmYxLTg2YjUtODQ4YzY3NGZjMzIxL3Byb3ZpZGVycy9NaWNyb3NvZnQuUmVzb3VyY2VzL2RlcGxveW1lbnRTdGFja3MvcHM0MDk3P2FwaS12ZXJzaW9uPTIwMjEtMDUtMDEtcHJldmlldw==",
      "RequestMethod": "PUT",
      "RequestBody": "{\r\n  \"location\": \"West US 2\",\r\n  \"properties\": {\r\n    \"template\": {\r\n      \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n      \"contentVersion\": \"1.0.0.0\",\r\n      \"parameters\": {\r\n        \"storageAccountName\": {\r\n          \"type\": \"string\",\r\n          \"defaultValue\": \"armbuilddemo18122\"\r\n        },\r\n        \"nestedDeploymentRG\": {\r\n          \"type\": \"string\",\r\n          \"defaultValue\": \"ps_test_subscription_deployment\"\r\n        },\r\n        \"policyLocation\": {\r\n          \"type\": \"string\",\r\n          \"defaultValue\": \"northeurope\"\r\n        }\r\n      },\r\n      \"variables\": {},\r\n      \"resources\": [\r\n        {\r\n          \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n          \"name\": \"policy2\",\r\n          \"apiVersion\": \"2016-12-01\",\r\n          \"properties\": {\r\n            \"policyType\": \"Custom\",\r\n            \"parameters\": {},\r\n            \"policyRule\": {\r\n              \"if\": {\r\n                \"field\": \"location\",\r\n                \"equals\": \"[parameters('policyLocation')]\"\r\n              },\r\n              \"then\": {\r\n                \"effect\": \"deny\"\r\n              }\r\n            }\r\n          }\r\n        },\r\n        {\r\n          \"type\": \"Microsoft.Authorization/policyAssignments\",\r\n          \"name\": \"location-lock\",\r\n          \"apiVersion\": \"2016-12-01\",\r\n          \"dependsOn\": [\r\n            \"policy2\"\r\n          ],\r\n          \"properties\": {\r\n            \"scope\": \"[subscription().id]\",\r\n            \"policyDefinitionId\": \"[resourceId('Microsoft.Authorization/policyDefinitions', 'policy2')]\"\r\n          }\r\n        },\r\n        {\r\n          \"type\": \"Microsoft.Resources/resourceGroups\",\r\n          \"name\": \"[parameters('nestedDeploymentRG')]\",\r\n          \"location\": \"West US\",\r\n          \"apiVersion\": \"2019-05-01\",\r\n          \"properties\": {}\r\n        },\r\n        {\r\n          \"type\": \"Microsoft.Resources/deployments\",\r\n          \"name\": \"rg-nested\",\r\n          \"apiVersion\": \"2017-05-10\",\r\n          \"resourceGroup\": \"[parameters('nestedDeploymentRG')]\",\r\n          \"dependsOn\": [\r\n            \"[parameters('nestedDeploymentRG')]\"\r\n          ],\r\n          \"properties\": {\r\n            \"template\": {\r\n              \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n              \"contentVersion\": \"1.0.0.0\",\r\n              \"parameters\": {},\r\n              \"variables\": {},\r\n              \"resources\": [\r\n                {\r\n                  \"type\": \"Microsoft.Storage/storageAccounts\",\r\n                  \"name\": \"[parameters('storageAccountName')]\",\r\n                  \"apiVersion\": \"2015-06-15\",\r\n                  \"location\": \"East US\",\r\n                  \"properties\": {\r\n                    \"accountType\": \"Standard_LRS\"\r\n                  }\r\n                }\r\n              ]\r\n            },\r\n            \"mode\": \"Incremental\"\r\n          }\r\n        }\r\n      ]\r\n    },\r\n    \"parameters\": {\r\n      \"storageAccountName\": {\r\n        \"value\": \"armbuilddemo18123\"\r\n      }\r\n    },\r\n    \"updateBehavior\": \"Detach\"\r\n  }\r\n}",
      "RequestHeaders": {
        "x-ms-client-request-id": [
          "b8210b00-4e8c-4de8-96f0-d1eb8ac6e9c8"
        ],
        "Accept-Language": [
          "en-US"
        ],
        "User-Agent": [
          "FxVersion/4.6.30015.01",
          "OSName/Windows",
          "OSVersion/Microsoft.Windows.10.0.19043.",
          "Microsoft.Azure.Management.ResourceManager.DeploymentStacksClient/3.13.2.0"
        ],
        "Content-Type": [
          "application/json; charset=utf-8"
        ],
        "Content-Length": [
          "3039"
        ]
      },
      "ResponseHeaders": {
        "Cache-Control": [
          "no-cache"
        ],
        "Pragma": [
          "no-cache"
        ],
        "Retry-After": [
          "0"
        ],
        "Azure-AsyncOperation": [
          "https://management.azure.com/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/locations/westus2/deploymentStackOperationStatus/6f312c36-aedf-4b7a-b1a8-5caca0e19736?api-version=2021-05-01-preview"
        ],
        "x-ms-request-id": [
          "fe815f9d-2211-4002-8499-a38de65750ab"
        ],
        "Server": [
          "Microsoft-HTTPAPI/2.0"
        ],
        "x-ms-ratelimit-remaining-subscription-writes": [
          "1199"
        ],
        "x-ms-correlation-request-id": [
          "b28c3f41-47fb-4291-b8dd-20bce5703ccc"
        ],
        "x-ms-routing-request-id": [
          "CANADACENTRAL:20210806T183835Z:b28c3f41-47fb-4291-b8dd-20bce5703ccc"
        ],
        "Strict-Transport-Security": [
          "max-age=31536000; includeSubDomains"
        ],
        "X-Content-Type-Options": [
          "nosniff"
        ],
        "Date": [
          "Fri, 06 Aug 2021 18:38:34 GMT"
        ],
        "Content-Length": [
          "3598"
        ],
        "Content-Type": [
          "application/json; charset=utf-8"
        ],
        "Expires": [
          "-1"
        ]
      },
      "ResponseBody": "{\r\n  \"location\": \"westus2\",\r\n  \"properties\": {\r\n    \"updateBehavior\": \"detach\",\r\n    \"parameters\": {\r\n      \"storageAccountName\": {\r\n        \"value\": \"armbuilddemo18123\"\r\n      }\r\n    },\r\n    \"template\": {\r\n      \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n      \"contentVersion\": \"1.0.0.0\",\r\n      \"parameters\": {\r\n        \"storageAccountName\": {\r\n          \"type\": \"string\",\r\n          \"defaultValue\": \"armbuilddemo18122\"\r\n        },\r\n        \"nestedDeploymentRG\": {\r\n          \"type\": \"string\",\r\n          \"defaultValue\": \"ps_test_subscription_deployment\"\r\n        },\r\n        \"policyLocation\": {\r\n          \"type\": \"string\",\r\n          \"defaultValue\": \"northeurope\"\r\n        }\r\n      },\r\n      \"variables\": {},\r\n      \"resources\": [\r\n        {\r\n          \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n          \"name\": \"policy2\",\r\n          \"apiVersion\": \"2016-12-01\",\r\n          \"properties\": {\r\n            \"policyType\": \"Custom\",\r\n            \"parameters\": {},\r\n            \"policyRule\": {\r\n              \"if\": {\r\n                \"field\": \"location\",\r\n                \"equals\": \"[parameters('policyLocation')]\"\r\n              },\r\n              \"then\": {\r\n                \"effect\": \"deny\"\r\n              }\r\n            }\r\n          }\r\n        },\r\n        {\r\n          \"type\": \"Microsoft.Authorization/policyAssignments\",\r\n          \"name\": \"location-lock\",\r\n          \"apiVersion\": \"2016-12-01\",\r\n          \"dependsOn\": [\r\n            \"policy2\"\r\n          ],\r\n          \"properties\": {\r\n            \"scope\": \"[subscription().id]\",\r\n            \"policyDefinitionId\": \"[resourceId('Microsoft.Authorization/policyDefinitions', 'policy2')]\"\r\n          }\r\n        },\r\n        {\r\n          \"type\": \"Microsoft.Resources/resourceGroups\",\r\n          \"name\": \"[parameters('nestedDeploymentRG')]\",\r\n          \"location\": \"West US\",\r\n          \"apiVersion\": \"2019-05-01\",\r\n          \"properties\": {}\r\n        },\r\n        {\r\n          \"type\": \"Microsoft.Resources/deployments\",\r\n          \"name\": \"rg-nested\",\r\n          \"apiVersion\": \"2017-05-10\",\r\n          \"resourceGroup\": \"[parameters('nestedDeploymentRG')]\",\r\n          \"dependsOn\": [\r\n            \"[parameters('nestedDeploymentRG')]\"\r\n          ],\r\n          \"properties\": {\r\n            \"template\": {\r\n              \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n              \"contentVersion\": \"1.0.0.0\",\r\n              \"parameters\": {},\r\n              \"variables\": {},\r\n              \"resources\": [\r\n                {\r\n                  \"type\": \"Microsoft.Storage/storageAccounts\",\r\n                  \"name\": \"[parameters('storageAccountName')]\",\r\n                  \"apiVersion\": \"2015-06-15\",\r\n                  \"location\": \"East US\",\r\n                  \"properties\": {\r\n                    \"accountType\": \"Standard_LRS\"\r\n                  }\r\n                }\r\n              ]\r\n            },\r\n            \"mode\": \"Incremental\"\r\n          }\r\n        }\r\n      ]\r\n    },\r\n    \"provisioningState\": \"initializing\"\r\n  },\r\n  \"systemData\": {\r\n    \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n    \"createdByType\": \"Application\",\r\n    \"createdAt\": \"2021-08-06T18:38:34.7122081Z\",\r\n    \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n    \"lastModifiedByType\": \"Application\",\r\n    \"lastModifiedAt\": \"2021-08-06T18:38:34.7122081Z\"\r\n  },\r\n  \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps4097\",\r\n  \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n  \"name\": \"ps4097\"\r\n}",
      "StatusCode": 201
    },
    {
      "RequestUri": "/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks?api-version=2021-05-01-preview",
      "EncodedRequestUri": "L3N1YnNjcmlwdGlvbnMvYTFiZmE2MzUtZjJiZi00MmYxLTg2YjUtODQ4YzY3NGZjMzIxL3Byb3ZpZGVycy9NaWNyb3NvZnQuUmVzb3VyY2VzL2RlcGxveW1lbnRTdGFja3M/YXBpLXZlcnNpb249MjAyMS0wNS0wMS1wcmV2aWV3",
      "RequestMethod": "GET",
      "RequestBody": "",
      "RequestHeaders": {
        "x-ms-client-request-id": [
          "b7d5f6ad-2e0c-4c77-9e67-b6e6aaee072e"
        ],
        "Accept-Language": [
          "en-US"
        ],
        "User-Agent": [
          "FxVersion/4.6.30015.01",
          "OSName/Windows",
          "OSVersion/Microsoft.Windows.10.0.19043.",
          "Microsoft.Azure.Management.ResourceManager.DeploymentStacksClient/3.13.2.0"
        ]
      },
      "ResponseHeaders": {
        "Cache-Control": [
          "no-cache"
        ],
        "Pragma": [
          "no-cache"
        ],
        "x-ms-original-request-ids": [
          "9b4235b8-dd54-466f-a19a-ba1f84bcd403"
        ],
        "x-ms-ratelimit-remaining-subscription-reads": [
          "11996"
        ],
        "x-ms-request-id": [
          "c46cd897-3758-482b-8a01-0dac6c900385"
        ],
        "x-ms-correlation-request-id": [
          "c46cd897-3758-482b-8a01-0dac6c900385"
        ],
        "x-ms-routing-request-id": [
          "CANADACENTRAL:20210806T183837Z:c46cd897-3758-482b-8a01-0dac6c900385"
        ],
        "Strict-Transport-Security": [
          "max-age=31536000; includeSubDomains"
        ],
        "X-Content-Type-Options": [
          "nosniff"
        ],
        "Date": [
          "Fri, 06 Aug 2021 18:38:36 GMT"
        ],
        "Content-Type": [
          "application/json; charset=utf-8"
        ],
        "Expires": [
          "-1"
        ],
        "Content-Length": [
          "35027"
        ],
        "Retry-After": [
          "0"
        ]
      },
      "ResponseBody": "{\r\n  \"value\": [\r\n    {\r\n      \"location\": \"westus2\",\r\n      \"properties\": {\r\n        \"snapshotId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps9412/snapshots/2021-08-05-21-43-40-ab2eb\",\r\n        \"updateBehavior\": \"detach\",\r\n        \"deploymentId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deployments/ps9412-2021-08-05-21-43-40-ab2eb\",\r\n        \"parameters\": {\r\n          \"storageAccountName\": {\r\n            \"value\": \"armbuilddemo18123\"\r\n          }\r\n        },\r\n        \"template\": {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n            \"storageAccountName\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"armbuilddemo18122\"\r\n            },\r\n            \"nestedDeploymentRG\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"ps_test_subscription_deployment\"\r\n            },\r\n            \"policyLocation\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"northeurope\"\r\n            }\r\n          },\r\n          \"variables\": {},\r\n          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n              \"name\": \"policy2\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"properties\": {\r\n                \"policyType\": \"Custom\",\r\n                \"parameters\": {},\r\n                \"policyRule\": {\r\n                  \"if\": {\r\n                    \"field\": \"location\",\r\n                    \"equals\": \"[parameters('policyLocation')]\"\r\n                  },\r\n                  \"then\": {\r\n                    \"effect\": \"deny\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyAssignments\",\r\n              \"name\": \"location-lock\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"dependsOn\": [\r\n                \"policy2\"\r\n              ],\r\n              \"properties\": {\r\n                \"scope\": \"[subscription().id]\",\r\n                \"policyDefinitionId\": \"[resourceId('Microsoft.Authorization/policyDefinitions', 'policy2')]\"\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\",\r\n              \"name\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"location\": \"West US\",\r\n              \"apiVersion\": \"2019-05-01\",\r\n              \"properties\": {}\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\",\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\": \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"dependsOn\": [\r\n                \"[parameters('nestedDeploymentRG')]\"\r\n              ],\r\n              \"properties\": {\r\n                \"template\": {\r\n                  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                  \"parameters\": {},\r\n                  \"variables\": {},\r\n                  \"resources\": [\r\n                    {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\",\r\n                      \"name\": \"[parameters('storageAccountName')]\",\r\n                      \"apiVersion\": \"2015-06-15\",\r\n                      \"location\": \"East US\",\r\n                      \"properties\": {\r\n                        \"accountType\": \"Standard_LRS\"\r\n                      }\r\n                    }\r\n                  ]\r\n                },\r\n                \"mode\": \"Incremental\"\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"managedResources\": [\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyAssignments/location-lock\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyDefinitions/policy2\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment/providers/Microsoft.Storage/storageAccounts/armbuilddemo18123\"\r\n          }\r\n        ],\r\n        \"provisioningState\": \"succeeded\"\r\n      },\r\n      \"systemData\": {\r\n        \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"createdByType\": \"Application\",\r\n        \"createdAt\": \"2021-08-05T21:43:40.3548862Z\",\r\n        \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"lastModifiedByType\": \"Application\",\r\n        \"lastModifiedAt\": \"2021-08-05T21:43:40.3548862Z\"\r\n      },\r\n      \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps9412\",\r\n      \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n      \"name\": \"ps9412\"\r\n    },\r\n    {\r\n      \"location\": \"westus2\",\r\n      \"properties\": {\r\n        \"snapshotId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps7734/snapshots/2021-08-05-20-47-45-561b8\",\r\n        \"updateBehavior\": \"detach\",\r\n        \"deploymentId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deployments/ps7734-2021-08-05-20-47-45-561b8\",\r\n        \"parameters\": {\r\n          \"foo\": {\r\n            \"value\": \"abc\"\r\n          },\r\n          \"bar\": {\r\n            \"value\": \"xyz\"\r\n          }\r\n        },\r\n        \"template\": {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n            \"foo\": {\r\n              \"type\": \"string\",\r\n              \"metadata\": {\r\n                \"description\": \"description\"\r\n              }\r\n            },\r\n            \"bar\": {\r\n              \"type\": \"string\",\r\n              \"metadata\": {\r\n                \"description\": \"description\"\r\n              }\r\n            }\r\n          },\r\n          \"functions\": [],\r\n          \"variables\": {},\r\n          \"resources\": [],\r\n          \"outputs\": {\r\n            \"foo\": {\r\n              \"type\": \"string\",\r\n              \"value\": \"[parameters('foo')]\"\r\n            },\r\n            \"bar\": {\r\n              \"type\": \"string\",\r\n              \"value\": \"[parameters('bar')]\"\r\n            }\r\n          }\r\n        },\r\n        \"managedResources\": [],\r\n        \"provisioningState\": \"succeeded\"\r\n      },\r\n      \"systemData\": {\r\n        \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"createdByType\": \"Application\",\r\n        \"createdAt\": \"2021-08-05T20:47:44.614607Z\",\r\n        \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"lastModifiedByType\": \"Application\",\r\n        \"lastModifiedAt\": \"2021-08-05T20:47:44.614607Z\"\r\n      },\r\n      \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps7734\",\r\n      \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n      \"name\": \"ps7734\"\r\n    },\r\n    {\r\n      \"location\": \"westus2\",\r\n      \"properties\": {\r\n        \"updateBehavior\": \"detach\",\r\n        \"deploymentId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deployments/ps7678-2021-08-05-21-31-07-b56e1\",\r\n        \"parameters\": {\r\n          \"siteLocation\": {\r\n            \"value\": \"East US\"\r\n          },\r\n          \"hostingPlanName\": {\r\n            \"value\": \"xDeploymentTestHost26668\"\r\n          },\r\n          \"sku\": {\r\n            \"value\": \"Basic\"\r\n          },\r\n          \"workerSize\": {\r\n            \"value\": 0\r\n          }\r\n        },\r\n        \"template\": {\r\n          \"$schema\": \"http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json#\",\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n            \"hostingPlanName\": {\r\n              \"type\": \"string\"\r\n            },\r\n            \"siteLocation\": {\r\n              \"type\": \"string\"\r\n            },\r\n            \"sku\": {\r\n              \"type\": \"string\",\r\n              \"allowedValues\": [\r\n                \"Free\",\r\n                \"Shared\",\r\n                \"Basic\",\r\n                \"Standard\"\r\n              ],\r\n              \"defaultValue\": \"Free\"\r\n            },\r\n            \"workerSize\": {\r\n              \"type\": \"int\",\r\n              \"allowedValues\": [\r\n                0,\r\n                1,\r\n                2\r\n              ],\r\n              \"defaultValue\": 0\r\n            }\r\n          },\r\n          \"resources\": [\r\n            {\r\n              \"apiVersion\": \"2014-04-01\",\r\n              \"name\": \"[parameters('hostingPlanName')]\",\r\n              \"type\": \"Microsoft.Web/serverfarms\",\r\n              \"location\": \"[parameters('siteLocation')]\",\r\n              \"properties\": {\r\n                \"name\": \"[parameters('hostingPlanName')]\",\r\n                \"sku\": \"[parameters('sku')]\",\r\n                \"workerSize\": \"[parameters('workerSize')]\",\r\n                \"numberOfWorkers\": 1\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"managedResources\": [],\r\n        \"provisioningState\": \"failed\",\r\n        \"error\": {\r\n          \"code\": \"DeploymentStackUpdateFailed\",\r\n          \"message\": \"One or more stages of deploymentStack update failed.\",\r\n          \"details\": [\r\n            {\r\n              \"code\": \"StackDeployResourcesFailed\",\r\n              \"message\": \"One or more resources could not be deployed.\",\r\n              \"details\": [\r\n                {\r\n                  \"code\": \"DeploymentFailed\",\r\n                  \"message\": \"At least one resource deployment operation failed. Please list deployment operations for details. Please see https://aka.ms/DeployOperations for usage details.\",\r\n                  \"details\": [\r\n                    {\r\n                      \"code\": \"ResourceNotFound\",\r\n                      \"message\": \"The Resource 'Microsoft.Web/serverFarms/xDeploymentTestHost26668' under resource group '<null>' was not found. For more details please go to https://aka.ms/ARMResourceNotFoundFix\"\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      \"systemData\": {\r\n        \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"createdByType\": \"Application\",\r\n        \"createdAt\": \"2021-08-05T21:31:07.1678095Z\",\r\n        \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"lastModifiedByType\": \"Application\",\r\n        \"lastModifiedAt\": \"2021-08-05T21:31:07.1678095Z\"\r\n      },\r\n      \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps7678\",\r\n      \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n      \"name\": \"ps7678\"\r\n    },\r\n    {\r\n      \"location\": \"westus2\",\r\n      \"properties\": {\r\n        \"updateBehavior\": \"detach\",\r\n        \"deploymentId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deployments/ps8650-2021-08-05-21-31-55-06541\",\r\n        \"parameters\": {\r\n          \"siteLocation\": {\r\n            \"value\": \"East US\"\r\n          },\r\n          \"sku\": {\r\n            \"value\": \"Basic\"\r\n          },\r\n          \"hostingPlanName\": {\r\n            \"value\": \"xDeploymentTestHost26668\"\r\n          },\r\n          \"workerSize\": {\r\n            \"value\": 0\r\n          }\r\n        },\r\n        \"template\": {\r\n          \"$schema\": \"http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json#\",\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n            \"hostingPlanName\": {\r\n              \"type\": \"string\"\r\n            },\r\n            \"siteLocation\": {\r\n              \"type\": \"string\"\r\n            },\r\n            \"sku\": {\r\n              \"type\": \"string\",\r\n              \"allowedValues\": [\r\n                \"Free\",\r\n                \"Shared\",\r\n                \"Basic\",\r\n                \"Standard\"\r\n              ],\r\n              \"defaultValue\": \"Free\"\r\n            },\r\n            \"workerSize\": {\r\n              \"type\": \"int\",\r\n              \"allowedValues\": [\r\n                0,\r\n                1,\r\n                2\r\n              ],\r\n              \"defaultValue\": 0\r\n            }\r\n          },\r\n          \"resources\": [\r\n            {\r\n              \"apiVersion\": \"2014-04-01\",\r\n              \"name\": \"[parameters('hostingPlanName')]\",\r\n              \"type\": \"Microsoft.Web/serverfarms\",\r\n              \"location\": \"[parameters('siteLocation')]\",\r\n              \"properties\": {\r\n                \"name\": \"[parameters('hostingPlanName')]\",\r\n                \"sku\": \"[parameters('sku')]\",\r\n                \"workerSize\": \"[parameters('workerSize')]\",\r\n                \"numberOfWorkers\": 1\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"managedResources\": [],\r\n        \"provisioningState\": \"failed\",\r\n        \"error\": {\r\n          \"code\": \"DeploymentStackUpdateFailed\",\r\n          \"message\": \"One or more stages of deploymentStack update failed.\",\r\n          \"details\": [\r\n            {\r\n              \"code\": \"StackDeployResourcesFailed\",\r\n              \"message\": \"One or more resources could not be deployed.\",\r\n              \"details\": [\r\n                {\r\n                  \"code\": \"DeploymentFailed\",\r\n                  \"message\": \"At least one resource deployment operation failed. Please list deployment operations for details. Please see https://aka.ms/DeployOperations for usage details.\",\r\n                  \"details\": [\r\n                    {\r\n                      \"code\": \"ResourceNotFound\",\r\n                      \"message\": \"The Resource 'Microsoft.Web/serverFarms/xDeploymentTestHost26668' under resource group '<null>' was not found. For more details please go to https://aka.ms/ARMResourceNotFoundFix\"\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      \"systemData\": {\r\n        \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"createdByType\": \"Application\",\r\n        \"createdAt\": \"2021-08-05T21:31:55.5907376Z\",\r\n        \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"lastModifiedByType\": \"Application\",\r\n        \"lastModifiedAt\": \"2021-08-05T21:31:55.5907376Z\"\r\n      },\r\n      \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps8650\",\r\n      \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n      \"name\": \"ps8650\"\r\n    },\r\n    {\r\n      \"location\": \"westus2\",\r\n      \"properties\": {\r\n        \"snapshotId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps2660/snapshots/2021-08-05-21-33-21-2a758\",\r\n        \"updateBehavior\": \"detach\",\r\n        \"deploymentId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deployments/ps2660-2021-08-05-21-33-21-2a758\",\r\n        \"parameters\": {\r\n          \"storageAccountName\": {\r\n            \"value\": \"armbuilddemo18123\"\r\n          }\r\n        },\r\n        \"template\": {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n            \"storageAccountName\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"armbuilddemo18122\"\r\n            },\r\n            \"nestedDeploymentRG\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"ps_test_subscription_deployment\"\r\n            },\r\n            \"policyLocation\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"northeurope\"\r\n            }\r\n          },\r\n          \"variables\": {},\r\n          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n              \"name\": \"policy2\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"properties\": {\r\n                \"policyType\": \"Custom\",\r\n                \"parameters\": {},\r\n                \"policyRule\": {\r\n                  \"if\": {\r\n                    \"field\": \"location\",\r\n                    \"equals\": \"[parameters('policyLocation')]\"\r\n                  },\r\n                  \"then\": {\r\n                    \"effect\": \"deny\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyAssignments\",\r\n              \"name\": \"location-lock\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"dependsOn\": [\r\n                \"policy2\"\r\n              ],\r\n              \"properties\": {\r\n                \"scope\": \"[subscription().id]\",\r\n                \"policyDefinitionId\": \"[resourceId('Microsoft.Authorization/policyDefinitions', 'policy2')]\"\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\",\r\n              \"name\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"location\": \"West US\",\r\n              \"apiVersion\": \"2019-05-01\",\r\n              \"properties\": {}\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\",\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\": \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"dependsOn\": [\r\n                \"[parameters('nestedDeploymentRG')]\"\r\n              ],\r\n              \"properties\": {\r\n                \"template\": {\r\n                  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                  \"parameters\": {},\r\n                  \"variables\": {},\r\n                  \"resources\": [\r\n                    {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\",\r\n                      \"name\": \"[parameters('storageAccountName')]\",\r\n                      \"apiVersion\": \"2015-06-15\",\r\n                      \"location\": \"East US\",\r\n                      \"properties\": {\r\n                        \"accountType\": \"Standard_LRS\"\r\n                      }\r\n                    }\r\n                  ]\r\n                },\r\n                \"mode\": \"Incremental\"\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"managedResources\": [\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyAssignments/location-lock\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyDefinitions/policy2\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment/providers/Microsoft.Storage/storageAccounts/armbuilddemo18123\"\r\n          }\r\n        ],\r\n        \"provisioningState\": \"succeeded\"\r\n      },\r\n      \"systemData\": {\r\n        \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"createdByType\": \"Application\",\r\n        \"createdAt\": \"2021-08-05T21:33:21.2647083Z\",\r\n        \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"lastModifiedByType\": \"Application\",\r\n        \"lastModifiedAt\": \"2021-08-05T21:33:21.2647083Z\"\r\n      },\r\n      \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps2660\",\r\n      \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n      \"name\": \"ps2660\"\r\n    },\r\n    {\r\n      \"location\": \"westus2\",\r\n      \"properties\": {\r\n        \"updateBehavior\": \"detach\",\r\n        \"deploymentId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deployments/ps117-2021-08-05-21-33-39-54b95\",\r\n        \"parameters\": {\r\n          \"storageAccountName\": {\r\n            \"value\": \"armbuilddemo18123\"\r\n          }\r\n        },\r\n        \"template\": {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n            \"storageAccountName\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"armbuilddemo18122\"\r\n            },\r\n            \"nestedDeploymentRG\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"ps_test_subscription_deployment\"\r\n            },\r\n            \"policyLocation\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"northeurope\"\r\n            }\r\n          },\r\n          \"variables\": {},\r\n          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n              \"name\": \"policy2\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"properties\": {\r\n                \"policyType\": \"Custom\",\r\n                \"parameters\": {},\r\n                \"policyRule\": {\r\n                  \"if\": {\r\n                    \"field\": \"location\",\r\n                    \"equals\": \"[parameters('policyLocation')]\"\r\n                  },\r\n                  \"then\": {\r\n                    \"effect\": \"deny\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyAssignments\",\r\n              \"name\": \"location-lock\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"dependsOn\": [\r\n                \"policy2\"\r\n              ],\r\n              \"properties\": {\r\n                \"scope\": \"[subscription().id]\",\r\n                \"policyDefinitionId\": \"[resourceId('Microsoft.Authorization/policyDefinitions', 'policy2')]\"\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\",\r\n              \"name\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"location\": \"West US\",\r\n              \"apiVersion\": \"2019-05-01\",\r\n              \"properties\": {}\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\",\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\": \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"dependsOn\": [\r\n                \"[parameters('nestedDeploymentRG')]\"\r\n              ],\r\n              \"properties\": {\r\n                \"template\": {\r\n                  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                  \"parameters\": {},\r\n                  \"variables\": {},\r\n                  \"resources\": [\r\n                    {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\",\r\n                      \"name\": \"[parameters('storageAccountName')]\",\r\n                      \"apiVersion\": \"2015-06-15\",\r\n                      \"location\": \"East US\",\r\n                      \"properties\": {\r\n                        \"accountType\": \"Standard_LRS\"\r\n                      }\r\n                    }\r\n                  ]\r\n                },\r\n                \"mode\": \"Incremental\"\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"managedResources\": [\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyAssignments/location-lock\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyDefinitions/policy2\"\r\n          }\r\n        ],\r\n        \"provisioningState\": \"failed\",\r\n        \"error\": {\r\n          \"code\": \"DeploymentStackUpdateFailed\",\r\n          \"message\": \"One or more stages of deploymentStack update failed.\",\r\n          \"details\": [\r\n            {\r\n              \"code\": \"StackDeployResourcesFailed\",\r\n              \"message\": \"One or more resources could not be deployed.\",\r\n              \"details\": [\r\n                {\r\n                  \"code\": \"DeploymentFailed\",\r\n                  \"message\": \"At least one resource deployment operation failed. Please list deployment operations for details. Please see https://aka.ms/DeployOperations for usage details.\",\r\n                  \"details\": [\r\n                    {\r\n                      \"code\": \"DeploymentActive\",\r\n                      \"message\": \"Unable to edit or replace deployment 'rg-nested': previous deployment from '8/5/2021 9:33:30 PM' is still active (expiration time is '8/12/2021 9:33:24 PM'). Please see https://aka.ms/arm-deploy for usage details.\"\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      \"systemData\": {\r\n        \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"createdByType\": \"Application\",\r\n        \"createdAt\": \"2021-08-05T21:33:38.9942748Z\",\r\n        \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"lastModifiedByType\": \"Application\",\r\n        \"lastModifiedAt\": \"2021-08-05T21:33:38.9942748Z\"\r\n      },\r\n      \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps117\",\r\n      \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n      \"name\": \"ps117\"\r\n    },\r\n    {\r\n      \"location\": \"westus2\",\r\n      \"properties\": {\r\n        \"snapshotId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/teststack36/snapshots/2021-08-05-21-35-58-a85a6\",\r\n        \"updateBehavior\": \"detach\",\r\n        \"deploymentId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deployments/teststack36-2021-08-05-21-35-58-a85a6\",\r\n        \"parameters\": {\r\n          \"storageAccountName\": {\r\n            \"value\": \"armbuilddemo18123\"\r\n          }\r\n        },\r\n        \"template\": {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n            \"storageAccountName\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"armbuilddemo18122\"\r\n            },\r\n            \"nestedDeploymentRG\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"ps_test_subscription_deployment\"\r\n            },\r\n            \"policyLocation\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"northeurope\"\r\n            }\r\n          },\r\n          \"variables\": {},\r\n          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n              \"name\": \"policy2\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"properties\": {\r\n                \"policyType\": \"Custom\",\r\n                \"parameters\": {},\r\n                \"policyRule\": {\r\n                  \"if\": {\r\n                    \"field\": \"location\",\r\n                    \"equals\": \"[parameters('policyLocation')]\"\r\n                  },\r\n                  \"then\": {\r\n                    \"effect\": \"deny\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyAssignments\",\r\n              \"name\": \"location-lock\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"dependsOn\": [\r\n                \"policy2\"\r\n              ],\r\n              \"properties\": {\r\n                \"scope\": \"[subscription().id]\",\r\n                \"policyDefinitionId\": \"[resourceId('Microsoft.Authorization/policyDefinitions', 'policy2')]\"\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\",\r\n              \"name\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"location\": \"West US\",\r\n              \"apiVersion\": \"2019-05-01\",\r\n              \"properties\": {}\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\",\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\": \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"dependsOn\": [\r\n                \"[parameters('nestedDeploymentRG')]\"\r\n              ],\r\n              \"properties\": {\r\n                \"template\": {\r\n                  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                  \"parameters\": {},\r\n                  \"variables\": {},\r\n                  \"resources\": [\r\n                    {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\",\r\n                      \"name\": \"[parameters('storageAccountName')]\",\r\n                      \"apiVersion\": \"2015-06-15\",\r\n                      \"location\": \"East US\",\r\n                      \"properties\": {\r\n                        \"accountType\": \"Standard_LRS\"\r\n                      }\r\n                    }\r\n                  ]\r\n                },\r\n                \"mode\": \"Incremental\"\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"managedResources\": [\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyAssignments/location-lock\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyDefinitions/policy2\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment/providers/Microsoft.Storage/storageAccounts/armbuilddemo18123\"\r\n          }\r\n        ],\r\n        \"provisioningState\": \"succeeded\"\r\n      },\r\n      \"systemData\": {\r\n        \"createdBy\": \"gopremra@microsoft.com\",\r\n        \"createdByType\": \"User\",\r\n        \"createdAt\": \"2021-08-05T21:35:58.4542015Z\",\r\n        \"lastModifiedBy\": \"gopremra@microsoft.com\",\r\n        \"lastModifiedByType\": \"User\",\r\n        \"lastModifiedAt\": \"2021-08-05T21:35:58.4542015Z\"\r\n      },\r\n      \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/teststack36\",\r\n      \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n      \"name\": \"teststack36\"\r\n    },\r\n    {\r\n      \"location\": \"westus2\",\r\n      \"properties\": {\r\n        \"snapshotId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps2841/snapshots/2021-08-05-21-38-53-9edd2\",\r\n        \"updateBehavior\": \"detach\",\r\n        \"deploymentId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deployments/ps2841-2021-08-05-21-38-53-9edd2\",\r\n        \"parameters\": {\r\n          \"storageAccountName\": {\r\n            \"value\": \"armbuilddemo18123\"\r\n          }\r\n        },\r\n        \"template\": {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n            \"storageAccountName\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"armbuilddemo18122\"\r\n            },\r\n            \"nestedDeploymentRG\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"ps_test_subscription_deployment\"\r\n            },\r\n            \"policyLocation\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"northeurope\"\r\n            }\r\n          },\r\n          \"variables\": {},\r\n          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n              \"name\": \"policy2\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"properties\": {\r\n                \"policyType\": \"Custom\",\r\n                \"parameters\": {},\r\n                \"policyRule\": {\r\n                  \"if\": {\r\n                    \"field\": \"location\",\r\n                    \"equals\": \"[parameters('policyLocation')]\"\r\n                  },\r\n                  \"then\": {\r\n                    \"effect\": \"deny\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyAssignments\",\r\n              \"name\": \"location-lock\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"dependsOn\": [\r\n                \"policy2\"\r\n              ],\r\n              \"properties\": {\r\n                \"scope\": \"[subscription().id]\",\r\n                \"policyDefinitionId\": \"[resourceId('Microsoft.Authorization/policyDefinitions', 'policy2')]\"\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\",\r\n              \"name\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"location\": \"West US\",\r\n              \"apiVersion\": \"2019-05-01\",\r\n              \"properties\": {}\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\",\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\": \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"dependsOn\": [\r\n                \"[parameters('nestedDeploymentRG')]\"\r\n              ],\r\n              \"properties\": {\r\n                \"template\": {\r\n                  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                  \"parameters\": {},\r\n                  \"variables\": {},\r\n                  \"resources\": [\r\n                    {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\",\r\n                      \"name\": \"[parameters('storageAccountName')]\",\r\n                      \"apiVersion\": \"2015-06-15\",\r\n                      \"location\": \"East US\",\r\n                      \"properties\": {\r\n                        \"accountType\": \"Standard_LRS\"\r\n                      }\r\n                    }\r\n                  ]\r\n                },\r\n                \"mode\": \"Incremental\"\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"managedResources\": [\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyAssignments/location-lock\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyDefinitions/policy2\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment/providers/Microsoft.Storage/storageAccounts/armbuilddemo18123\"\r\n          }\r\n        ],\r\n        \"provisioningState\": \"succeeded\"\r\n      },\r\n      \"systemData\": {\r\n        \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"createdByType\": \"Application\",\r\n        \"createdAt\": \"2021-08-05T21:38:53.2752718Z\",\r\n        \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"lastModifiedByType\": \"Application\",\r\n        \"lastModifiedAt\": \"2021-08-05T21:38:53.2752718Z\"\r\n      },\r\n      \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps2841\",\r\n      \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n      \"name\": \"ps2841\"\r\n    },\r\n    {\r\n      \"location\": \"westus2\",\r\n      \"properties\": {\r\n        \"snapshotId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps5377/snapshots/2021-08-05-21-41-06-1ae62\",\r\n        \"updateBehavior\": \"detach\",\r\n        \"deploymentId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deployments/ps5377-2021-08-05-21-41-06-1ae62\",\r\n        \"parameters\": {\r\n          \"storageAccountName\": {\r\n            \"value\": \"armbuilddemo18123\"\r\n          }\r\n        },\r\n        \"template\": {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n            \"storageAccountName\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"armbuilddemo18122\"\r\n            },\r\n            \"nestedDeploymentRG\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"ps_test_subscription_deployment\"\r\n            },\r\n            \"policyLocation\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"northeurope\"\r\n            }\r\n          },\r\n          \"variables\": {},\r\n          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n              \"name\": \"policy2\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"properties\": {\r\n                \"policyType\": \"Custom\",\r\n                \"parameters\": {},\r\n                \"policyRule\": {\r\n                  \"if\": {\r\n                    \"field\": \"location\",\r\n                    \"equals\": \"[parameters('policyLocation')]\"\r\n                  },\r\n                  \"then\": {\r\n                    \"effect\": \"deny\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyAssignments\",\r\n              \"name\": \"location-lock\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"dependsOn\": [\r\n                \"policy2\"\r\n              ],\r\n              \"properties\": {\r\n                \"scope\": \"[subscription().id]\",\r\n                \"policyDefinitionId\": \"[resourceId('Microsoft.Authorization/policyDefinitions', 'policy2')]\"\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\",\r\n              \"name\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"location\": \"West US\",\r\n              \"apiVersion\": \"2019-05-01\",\r\n              \"properties\": {}\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\",\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\": \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"dependsOn\": [\r\n                \"[parameters('nestedDeploymentRG')]\"\r\n              ],\r\n              \"properties\": {\r\n                \"template\": {\r\n                  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                  \"parameters\": {},\r\n                  \"variables\": {},\r\n                  \"resources\": [\r\n                    {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\",\r\n                      \"name\": \"[parameters('storageAccountName')]\",\r\n                      \"apiVersion\": \"2015-06-15\",\r\n                      \"location\": \"East US\",\r\n                      \"properties\": {\r\n                        \"accountType\": \"Standard_LRS\"\r\n                      }\r\n                    }\r\n                  ]\r\n                },\r\n                \"mode\": \"Incremental\"\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"managedResources\": [\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyAssignments/location-lock\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyDefinitions/policy2\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment/providers/Microsoft.Storage/storageAccounts/armbuilddemo18123\"\r\n          }\r\n        ],\r\n        \"provisioningState\": \"succeeded\"\r\n      },\r\n      \"systemData\": {\r\n        \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"createdByType\": \"Application\",\r\n        \"createdAt\": \"2021-08-05T21:41:06.394859Z\",\r\n        \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"lastModifiedByType\": \"Application\",\r\n        \"lastModifiedAt\": \"2021-08-05T21:41:06.394859Z\"\r\n      },\r\n      \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps5377\",\r\n      \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n      \"name\": \"ps5377\"\r\n    },\r\n    {\r\n      \"location\": \"westus2\",\r\n      \"properties\": {\r\n        \"snapshotId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps1611/snapshots/2021-08-05-21-44-02-3e9d9\",\r\n        \"updateBehavior\": \"detach\",\r\n        \"deploymentId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deployments/ps1611-2021-08-05-21-44-02-3e9d9\",\r\n        \"parameters\": {\r\n          \"storageAccountName\": {\r\n            \"value\": \"armbuilddemo18123\"\r\n          }\r\n        },\r\n        \"template\": {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n            \"storageAccountName\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"armbuilddemo18122\"\r\n            },\r\n            \"nestedDeploymentRG\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"ps_test_subscription_deployment\"\r\n            },\r\n            \"policyLocation\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"northeurope\"\r\n            }\r\n          },\r\n          \"variables\": {},\r\n          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n              \"name\": \"policy2\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"properties\": {\r\n                \"policyType\": \"Custom\",\r\n                \"parameters\": {},\r\n                \"policyRule\": {\r\n                  \"if\": {\r\n                    \"field\": \"location\",\r\n                    \"equals\": \"[parameters('policyLocation')]\"\r\n                  },\r\n                  \"then\": {\r\n                    \"effect\": \"deny\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyAssignments\",\r\n              \"name\": \"location-lock\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"dependsOn\": [\r\n                \"policy2\"\r\n              ],\r\n              \"properties\": {\r\n                \"scope\": \"[subscription().id]\",\r\n                \"policyDefinitionId\": \"[resourceId('Microsoft.Authorization/policyDefinitions', 'policy2')]\"\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\",\r\n              \"name\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"location\": \"West US\",\r\n              \"apiVersion\": \"2019-05-01\",\r\n              \"properties\": {}\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\",\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\": \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"dependsOn\": [\r\n                \"[parameters('nestedDeploymentRG')]\"\r\n              ],\r\n              \"properties\": {\r\n                \"template\": {\r\n                  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                  \"parameters\": {},\r\n                  \"variables\": {},\r\n                  \"resources\": [\r\n                    {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\",\r\n                      \"name\": \"[parameters('storageAccountName')]\",\r\n                      \"apiVersion\": \"2015-06-15\",\r\n                      \"location\": \"East US\",\r\n                      \"properties\": {\r\n                        \"accountType\": \"Standard_LRS\"\r\n                      }\r\n                    }\r\n                  ]\r\n                },\r\n                \"mode\": \"Incremental\"\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"managedResources\": [\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyAssignments/location-lock\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyDefinitions/policy2\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment/providers/Microsoft.Storage/storageAccounts/armbuilddemo18123\"\r\n          }\r\n        ],\r\n        \"provisioningState\": \"succeeded\"\r\n      },\r\n      \"systemData\": {\r\n        \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"createdByType\": \"Application\",\r\n        \"createdAt\": \"2021-08-05T21:44:01.8765993Z\",\r\n        \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"lastModifiedByType\": \"Application\",\r\n        \"lastModifiedAt\": \"2021-08-05T21:44:01.8765993Z\"\r\n      },\r\n      \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps1611\",\r\n      \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n      \"name\": \"ps1611\"\r\n    },\r\n    {\r\n      \"location\": \"westus2\",\r\n      \"properties\": {\r\n        \"snapshotId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps2258/snapshots/2021-08-05-21-45-03-07494\",\r\n        \"updateBehavior\": \"detach\",\r\n        \"deploymentId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deployments/ps2258-2021-08-05-21-45-03-07494\",\r\n        \"parameters\": {\r\n          \"storageAccountName\": {\r\n            \"value\": \"armbuilddemo18123\"\r\n          }\r\n        },\r\n        \"template\": {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n            \"storageAccountName\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"armbuilddemo18122\"\r\n            },\r\n            \"nestedDeploymentRG\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"ps_test_subscription_deployment\"\r\n            },\r\n            \"policyLocation\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"northeurope\"\r\n            }\r\n          },\r\n          \"variables\": {},\r\n          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n              \"name\": \"policy2\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"properties\": {\r\n                \"policyType\": \"Custom\",\r\n                \"parameters\": {},\r\n                \"policyRule\": {\r\n                  \"if\": {\r\n                    \"field\": \"location\",\r\n                    \"equals\": \"[parameters('policyLocation')]\"\r\n                  },\r\n                  \"then\": {\r\n                    \"effect\": \"deny\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyAssignments\",\r\n              \"name\": \"location-lock\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"dependsOn\": [\r\n                \"policy2\"\r\n              ],\r\n              \"properties\": {\r\n                \"scope\": \"[subscription().id]\",\r\n                \"policyDefinitionId\": \"[resourceId('Microsoft.Authorization/policyDefinitions', 'policy2')]\"\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\",\r\n              \"name\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"location\": \"West US\",\r\n              \"apiVersion\": \"2019-05-01\",\r\n              \"properties\": {}\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\",\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\": \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"dependsOn\": [\r\n                \"[parameters('nestedDeploymentRG')]\"\r\n              ],\r\n              \"properties\": {\r\n                \"template\": {\r\n                  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                  \"parameters\": {},\r\n                  \"variables\": {},\r\n                  \"resources\": [\r\n                    {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\",\r\n                      \"name\": \"[parameters('storageAccountName')]\",\r\n                      \"apiVersion\": \"2015-06-15\",\r\n                      \"location\": \"East US\",\r\n                      \"properties\": {\r\n                        \"accountType\": \"Standard_LRS\"\r\n                      }\r\n                    }\r\n                  ]\r\n                },\r\n                \"mode\": \"Incremental\"\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"managedResources\": [\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyAssignments/location-lock\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Authorization/policyDefinitions/policy2\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment\"\r\n          },\r\n          {\r\n            \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps_test_subscription_deployment/providers/Microsoft.Storage/storageAccounts/armbuilddemo18123\"\r\n          }\r\n        ],\r\n        \"provisioningState\": \"succeeded\"\r\n      },\r\n      \"systemData\": {\r\n        \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"createdByType\": \"Application\",\r\n        \"createdAt\": \"2021-08-05T21:45:02.637839Z\",\r\n        \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"lastModifiedByType\": \"Application\",\r\n        \"lastModifiedAt\": \"2021-08-05T21:45:02.637839Z\"\r\n      },\r\n      \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps2258\",\r\n      \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n      \"name\": \"ps2258\"\r\n    },\r\n    {\r\n      \"location\": \"westus2\",\r\n      \"properties\": {\r\n        \"updateBehavior\": \"detach\",\r\n        \"parameters\": {},\r\n        \"templateLink\": {\r\n          \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps897/providers/Microsoft.Resources/templateSpecs/ps3176/versions/v1\"\r\n        },\r\n        \"provisioningState\": \"failed\",\r\n        \"error\": {\r\n          \"code\": \"DeploymentStackUpdateFailed\",\r\n          \"message\": \"One or more stages of deploymentStack update failed.\",\r\n          \"details\": [\r\n            {\r\n              \"code\": \"StackDeployResourcesFailed\",\r\n              \"message\": \"One or more resources could not be deployed.\",\r\n              \"details\": [\r\n                {\r\n                  \"code\": \"InvalidTemplateSpec\",\r\n                  \"message\": \"Unable to retrieve the template content from the resource ID '/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/resourceGroups/ps897/providers/Microsoft.Resources/templateSpecs/ps3176/versions/v1'. Please see https://aka.ms/arm-deploy for usage details. Diagnostic information: timestamp '20210806T182846Z', tracking Id '67f3929b-9b87-4db1-bd3a-cd4c2b5fb92d', request correlation Id 'c153a3f3-aa18-46de-b79d-61000f79777d'.\",\r\n                  \"details\": [],\r\n                  \"additionalInfo\": []\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      \"systemData\": {\r\n        \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"createdByType\": \"Application\",\r\n        \"createdAt\": \"2021-08-06T18:28:45.0078765Z\",\r\n        \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"lastModifiedByType\": \"Application\",\r\n        \"lastModifiedAt\": \"2021-08-06T18:28:45.0078765Z\"\r\n      },\r\n      \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps7458\",\r\n      \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n      \"name\": \"ps7458\"\r\n    },\r\n    {\r\n      \"location\": \"westus2\",\r\n      \"properties\": {\r\n        \"updateBehavior\": \"detach\",\r\n        \"deploymentId\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deployments/ps4097-2021-08-06-18-38-35-2fd49\",\r\n        \"parameters\": {\r\n          \"storageAccountName\": {\r\n            \"value\": \"armbuilddemo18123\"\r\n          }\r\n        },\r\n        \"template\": {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n            \"storageAccountName\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"armbuilddemo18122\"\r\n            },\r\n            \"nestedDeploymentRG\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"ps_test_subscription_deployment\"\r\n            },\r\n            \"policyLocation\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\": \"northeurope\"\r\n            }\r\n          },\r\n          \"variables\": {},\r\n          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n              \"name\": \"policy2\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"properties\": {\r\n                \"policyType\": \"Custom\",\r\n                \"parameters\": {},\r\n                \"policyRule\": {\r\n                  \"if\": {\r\n                    \"field\": \"location\",\r\n                    \"equals\": \"[parameters('policyLocation')]\"\r\n                  },\r\n                  \"then\": {\r\n                    \"effect\": \"deny\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Authorization/policyAssignments\",\r\n              \"name\": \"location-lock\",\r\n              \"apiVersion\": \"2016-12-01\",\r\n              \"dependsOn\": [\r\n                \"policy2\"\r\n              ],\r\n              \"properties\": {\r\n                \"scope\": \"[subscription().id]\",\r\n                \"policyDefinitionId\": \"[resourceId('Microsoft.Authorization/policyDefinitions', 'policy2')]\"\r\n              }\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\",\r\n              \"name\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"location\": \"West US\",\r\n              \"apiVersion\": \"2019-05-01\",\r\n              \"properties\": {}\r\n            },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\",\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\": \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedDeploymentRG')]\",\r\n              \"dependsOn\": [\r\n                \"[parameters('nestedDeploymentRG')]\"\r\n              ],\r\n              \"properties\": {\r\n                \"template\": {\r\n                  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                  \"parameters\": {},\r\n                  \"variables\": {},\r\n                  \"resources\": [\r\n                    {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\",\r\n                      \"name\": \"[parameters('storageAccountName')]\",\r\n                      \"apiVersion\": \"2015-06-15\",\r\n                      \"location\": \"East US\",\r\n                      \"properties\": {\r\n                        \"accountType\": \"Standard_LRS\"\r\n                      }\r\n                    }\r\n                  ]\r\n                },\r\n                \"mode\": \"Incremental\"\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        \"provisioningState\": \"deploying\"\r\n      },\r\n      \"systemData\": {\r\n        \"createdBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"createdByType\": \"Application\",\r\n        \"createdAt\": \"2021-08-06T18:38:34.7122081Z\",\r\n        \"lastModifiedBy\": \"546094f3-32fa-493c-824c-bd9575b0d2fe\",\r\n        \"lastModifiedByType\": \"Application\",\r\n        \"lastModifiedAt\": \"2021-08-06T18:38:34.7122081Z\"\r\n      },\r\n      \"id\": \"/subscriptions/a1bfa635-f2bf-42f1-86b5-848c674fc321/providers/Microsoft.Resources/deploymentStacks/ps4097\",\r\n      \"type\": \"Microsoft.Resources/deploymentStacks\",\r\n      \"name\": \"ps4097\"\r\n    }\r\n  ]\r\n}",
      "StatusCode": 200
    }
  ],
  "Names": {
    "Test-GetSubscriptionDeploymentStack": [
      "ps2385",
      "ps4097"
    ]
  },
  "Variables": {
    "SubscriptionId": "a1bfa635-f2bf-42f1-86b5-848c674fc321"
  }
}